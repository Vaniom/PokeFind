{"ast":null,"code":"var _regeneratorRuntime = require(\"/Users/florentpianet/Documents/React/pokefind/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/florentpianet/Documents/React/pokefind/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/Users/florentpianet/Documents/React/pokefind/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/florentpianet/Documents/React/pokefind/node_modules/@babel/runtime/helpers/createClass\");\n\nvar pMap = require('p-map');\n\nvar _require = require('./endpoints.js'),\n    endpoints = _require.endpoints;\n\nvar _require2 = require('./rootEndpoints.js'),\n    rootEndpoints = _require2.rootEndpoints;\n\nvar _require3 = require('./getter.js'),\n    getJSON = _require3.getJSON;\n\nvar _require4 = require('./default.js'),\n    values = _require4.values;\n\nvar configurator = require('./configurator.js');\n\nvar _require5 = require('./error.js'),\n    handleError = _require5.handleError;\n\nvar Pokedex =\n/*#__PURE__*/\nfunction () {\n  \"use strict\";\n\n  function Pokedex(config) {\n    var _this = this;\n\n    _classCallCheck(this, Pokedex);\n\n    configurator.setPokedexConfiguration(config); // add to Pokedex.prototype all our endpoint functions\n\n    endpoints.forEach(function (endpoint) {\n      _this[endpoint[0]] =\n      /*#__PURE__*/\n      function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee2(input, cb) {\n          var mapper, mappedResults;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.prev = 0;\n\n                  mapper =\n                  /*#__PURE__*/\n                  function () {\n                    var _ref2 = _asyncToGenerator(\n                    /*#__PURE__*/\n                    _regeneratorRuntime.mark(function _callee(name) {\n                      var queryRes;\n                      return _regeneratorRuntime.wrap(function _callee$(_context) {\n                        while (1) {\n                          switch (_context.prev = _context.next) {\n                            case 0:\n                              _context.next = 2;\n                              return getJSON(\"\".concat(values.protocol).concat(values.hostName).concat(values.versionPath).concat(endpoint[1], \"/\").concat(name, \"/\"));\n\n                            case 2:\n                              queryRes = _context.sent;\n                              return _context.abrupt(\"return\", queryRes);\n\n                            case 4:\n                            case \"end\":\n                              return _context.stop();\n                          }\n                        }\n                      }, _callee);\n                    }));\n\n                    return function mapper(_x3) {\n                      return _ref2.apply(this, arguments);\n                    };\n                  }();\n\n                  if (!input) {\n                    _context2.next = 13;\n                    break;\n                  }\n\n                  if (!(typeof input === 'number' || typeof input === 'string')) {\n                    _context2.next = 7;\n                    break;\n                  }\n\n                  return _context2.abrupt(\"return\", getJSON(\"\".concat(values.protocol).concat(values.hostName).concat(values.versionPath).concat(endpoint[1], \"/\").concat(input, \"/\"), cb));\n\n                case 7:\n                  if (!(typeof input === 'object')) {\n                    _context2.next = 13;\n                    break;\n                  }\n\n                  _context2.next = 10;\n                  return pMap(input, mapper, {\n                    concurrency: 4\n                  });\n\n                case 10:\n                  mappedResults = _context2.sent;\n\n                  if (cb) {\n                    cb(mappedResults);\n                  }\n\n                  return _context2.abrupt(\"return\", mappedResults);\n\n                case 13:\n                  _context2.next = 18;\n                  break;\n\n                case 15:\n                  _context2.prev = 15;\n                  _context2.t0 = _context2[\"catch\"](0);\n                  handleError(_context2.t0, cb);\n\n                case 18:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, null, [[0, 15]]);\n        }));\n\n        return function (_x, _x2) {\n          return _ref.apply(this, arguments);\n        };\n      }();\n    });\n    rootEndpoints.forEach(function (rootEndpoint) {\n      _this[rootEndpoint[0]] =\n      /*#__PURE__*/\n      function () {\n        var _ref3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee3(config, cb) {\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.prev = 0;\n                  configurator.setRootEndpointConfiguration(config);\n                  return _context3.abrupt(\"return\", getJSON(\"\".concat(values.protocol).concat(values.hostName).concat(values.versionPath).concat(rootEndpoint[1], \"?limit=\").concat(values.limit, \"&offset=\").concat(values.offset), cb));\n\n                case 5:\n                  _context3.prev = 5;\n                  _context3.t0 = _context3[\"catch\"](0);\n                  handleError(_context3.t0, cb);\n\n                case 8:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, null, [[0, 5]]);\n        }));\n\n        return function (_x4, _x5) {\n          return _ref3.apply(this, arguments);\n        };\n      }();\n    });\n  }\n\n  _createClass(Pokedex, [{\n    key: \"resource\",\n    value: function () {\n      var _resource = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(path, cb) {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n\n                if (!(typeof path === 'string')) {\n                  _context4.next = 5;\n                  break;\n                }\n\n                result = getJSON(path);\n                _context4.next = 10;\n                break;\n\n              case 5:\n                if (!(typeof path === 'object')) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                result = Promise.all(path.map(function (p) {\n                  return getJSON(p);\n                }));\n                _context4.next = 10;\n                break;\n\n              case 9:\n                throw 'String or Array required';\n\n              case 10:\n                if (cb) {\n                  cb(result);\n                }\n\n                return _context4.abrupt(\"return\", result);\n\n              case 14:\n                _context4.prev = 14;\n                _context4.t0 = _context4[\"catch\"](0);\n                throw new Error(_context4.t0);\n\n              case 17:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 14]]);\n      }));\n\n      function resource(_x6, _x7) {\n        return _resource.apply(this, arguments);\n      }\n\n      return resource;\n    }()\n  }]);\n\n  return Pokedex;\n}();\n\n;\nmodule.exports = Pokedex;","map":null,"metadata":{},"sourceType":"script"}